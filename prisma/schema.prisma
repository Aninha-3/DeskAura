// Este é o seu arquivo de esquema do Prisma.
// Você pode ler mais sobre ele na documentação: https://pris.ly/d/prisma-schema

// Configura o conector do seu banco de dados.
// Você pode mudar 'postgresql' para 'sqlite', 'mysql', 'sqlserver', 'cockroachdb' ou 'mongodb'.
datasource db {
  provider = "mysql"
  url      = "mysql://root:admin@localhost:3306/DeskAura"

}

// O gerador do Prisma Client.
// Ele é responsável por criar o código do cliente que você usará na sua aplicação.
generator client {
  provider = "prisma-client-js"
}


// Representa a tabela de usuários.
// Contém todas as informações básicas de cada pessoa que usa a plataforma.
model Usuario {
  id_usuario    String    @id @default(uuid())
  nome          String
  email         String    @unique
  senha_hash    String
  data_cadastro DateTime  @default(now())
  ultimo_login  DateTime?
  perfil        Perfil    @relation(fields: [perfilId], references: [id_perfil])
  perfilId      String
  simulacoes    Simulacao[]

  @@map("Usuario") // ← nome exato da tabela no MySQL
}

model Perfil {
  id_perfil   String    @id @default(uuid())
  nome_perfil String    @unique
  descricao   String?
  usuarios    Usuario[]

  @@map("Perfil")
}

model Simulacao {
  id_simulacao  String             @id @default(uuid())
  titulo        String
  parametros    Json
  resultado     Json
  data_execucao DateTime           @default(now())
  usuario       Usuario            @relation(fields: [id_usuario], references: [id_usuario])
  id_usuario    String
  historico     HistoricoSimulacao[]

  @@map("Simulacao")
}

model HistoricoSimulacao {
  id_historico String       @id @default(uuid())
  acao         String
  data_acao    DateTime     @default(now())
  detalhes     String?
  simulacao    Simulacao    @relation(fields: [id_simulacao], references: [id_simulacao])
  id_simulacao String

  @@map("HistoricoSimulacao")
}
